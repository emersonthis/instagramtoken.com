<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Instagram Token Generator</title>

    <link rel="stylesheet" href="./style.css" />

</head>
<body>

<div class="container">
<h1>Instagram Token Generator</h1>

<form class="markdown-form" id="form" onsubmit="onSubmit(event);">
    <label>Client ID</label>
    <input type="text" name="client_id" id="client_id" value="64fe4035a90d4014ab03bfd83ceadb7e" />
    <label>Client Secret</label>
    <input type="text" name="client_secret" id="client_secret" value="5cb0a82ad4e748b4a882e57235ec3651" />
    <div class="submit-wrap"><input type="submit" value="Create token"></div>
</form>

<!-- <h3>Response</h3>
<div class="markup-text" id="response" placeholder="Response will appear here..."></div> -->

</div><!-- .container -->

<!-- <script src="/socket.io.js"></script>
<script>
  var socket = io();
  console.log(socket);
</script>
 -->

 <script   src="https://code.jquery.com/jquery-1.12.4.min.js"   integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="   crossorigin="anonymous"></script> 
 
 <script>
    function onSubmit(e) {
        
        var client_id = document.getElementById('client_id').value;
        var client_secret = document.getElementById('client_secret').value;
        var redirect_uri = window.location.origin + '/oauthredirect/?client_secret=' + client_secret + '&client_id=' + client_id;
        // redirect_uri = encodeURIComponent(redirect_uri);

        console.log('client_id', client_id);
        console.log('client_secret', client_secret);
        console.log('redirect_uri', redirect_uri);

        var base = 'https://api.instagram.com/oauth/authorize/?';
        var href = base +'redirect_uri='+redirect_uri+'&response_type=code&scope=public_content&client_id='+client_id;
        
        console.log('href', href);

        try {
            window.location.href = href;
        } catch(e) {
            console.log(e);
        }

        e.preventDefault();
    }
</script>
</body>
</html>